{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rohit\\\\OneDrive\\\\Desktop\\\\SE project\\\\NEWS\\\\client\\\\src\\\\pages\\\\HomePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Hero from '../components/common/Hero';\nimport NewsCard from '../components/common/NewsCard';\nimport LoadingSpinner from '../components/common/LoadingSpinner';\nimport '../components/common/Hero.css';\nimport '../components/common/NewsCard.css';\nimport './HomePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VALID_CATEGORIES = ['business', 'entertainment', 'general', 'health', 'science', 'sports', 'technology'];\nfunction HomePage() {\n  _s();\n  // Accept both categoryName and searchQuery from URL params\n  const {\n    categoryName,\n    searchQuery\n  } = useParams();\n  const [newsArticles, setNewsArticles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [displayCategory, setDisplayCategory] = useState('Latest');\n  useEffect(() => {\n    let fetchCategory = null;\n    setError(null);\n\n    // If searchQuery exists, treat as search mode\n    if (searchQuery) {\n      setDisplayCategory(`Results for \"${decodeURIComponent(searchQuery)}\"`);\n    } else if (categoryName) {\n      const lowerCaseCategory = categoryName.toLowerCase();\n      if (VALID_CATEGORIES.includes(lowerCaseCategory)) {\n        fetchCategory = lowerCaseCategory;\n        setDisplayCategory(lowerCaseCategory.charAt(0).toUpperCase() + lowerCaseCategory.slice(1));\n      } else {\n        setError(`Invalid category: ${categoryName}. Please select a valid category.`);\n        setLoading(false);\n        setNewsArticles([]);\n        setDisplayCategory('Invalid Category');\n        return;\n      }\n    } else {\n      setDisplayCategory('Top Headlines');\n    }\n    const fetchNews = async () => {\n      setLoading(true);\n      setError(null);\n      setNewsArticles([]);\n      const apiKey = process.env.REACT_APP_NEWS_API_KEY;\n      if (!apiKey) {\n        setError(\"News API key is missing.\");\n        setLoading(false);\n        return;\n      }\n      let apiUrl = `https://newsdata.io/api/1/latest?apikey=${apiKey}&country=in&language=en`;\n\n      // If searching, use the 'q' parameter for the topic\n      if (searchQuery) {\n        apiUrl += `&q=${encodeURIComponent(searchQuery)}`;\n      } else if (fetchCategory) {\n        apiUrl += `&category=${fetchCategory}`;\n      }\n      try {\n        const response = await fetch(apiUrl);\n        if (!response.ok) {\n          let errorMsg = `HTTP error ${response.status}: Failed to fetch news.`;\n          try {\n            const errorData = await response.json();\n            errorMsg = `API Error (${response.status}): ${errorData.message || 'Check API documentation or key.'}`;\n          } catch (parseError) {}\n          throw new Error(errorMsg);\n        }\n        const data = await response.json();\n\n        // Adjusted for newsdata.io API structure\n        if ((data.status === \"success\" || data.status === \"ok\") && data.results) {\n          const validArticles = data.results.filter(article => article.title && article.link && article.image_url);\n          setNewsArticles(validArticles);\n          if (validArticles.length === 0) {\n            setError(searchQuery ? `No articles found for \"${decodeURIComponent(searchQuery)}\".` : fetchCategory ? `No articles found for category: ${displayCategory}.` : \"No articles found.\");\n          }\n        } else if (data.status === \"error\") {\n          setError(`API Error: ${data.message || 'Unknown API error'}`);\n        } else {\n          setError(\"Received unexpected data structure from API.\");\n        }\n      } catch (err) {\n        setError(err.message.includes('Failed to fetch') ? \"Network error: Could not fetch news.\" : err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchNews();\n  }, [categoryName, searchQuery, displayCategory]);\n  const handleVerifyClick = articleUrl => {\n    if (!articleUrl) return;\n    alert(`Verification requested for: ${articleUrl}\\n(Backend call needed)`);\n    // TODO: Implement backend API call for verification\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: 'center',\n          margin: '1.5rem 0',\n          color: '#333'\n        },\n        children: displayCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this), error && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [\"\\u26A0\\uFE0F Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this), !loading && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"news-grid-container\",\n        children: newsArticles.length > 0 ? newsArticles.map(article => /*#__PURE__*/_jsxDEV(NewsCard, {\n          title: article.title,\n          description: article.description,\n          image: article.image_url,\n          url: article.link,\n          source: article.source_id,\n          onVerifyClick: handleVerifyClick\n        }, article.link, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No news articles available for this topic.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n_s(HomePage, \"1rgvLl4gGNlnA18A1IJRuTp62s8=\", false, function () {\n  return [useParams];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Hero","NewsCard","LoadingSpinner","jsxDEV","_jsxDEV","VALID_CATEGORIES","HomePage","_s","categoryName","searchQuery","newsArticles","setNewsArticles","loading","setLoading","error","setError","displayCategory","setDisplayCategory","fetchCategory","decodeURIComponent","lowerCaseCategory","toLowerCase","includes","charAt","toUpperCase","slice","fetchNews","apiKey","process","env","REACT_APP_NEWS_API_KEY","apiUrl","encodeURIComponent","response","fetch","ok","errorMsg","status","errorData","json","message","parseError","Error","data","results","validArticles","filter","article","title","link","image_url","length","err","handleVerifyClick","articleUrl","alert","children","className","style","textAlign","margin","color","fileName","_jsxFileName","lineNumber","columnNumber","map","description","image","url","source","source_id","onVerifyClick","_c","$RefreshReg$"],"sources":["C:/Users/rohit/OneDrive/Desktop/SE project/NEWS/client/src/pages/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport Hero from '../components/common/Hero';\r\nimport NewsCard from '../components/common/NewsCard';\r\nimport LoadingSpinner from '../components/common/LoadingSpinner';\r\n\r\nimport '../components/common/Hero.css';\r\nimport '../components/common/NewsCard.css';\r\nimport './HomePage.css';\r\n\r\nconst VALID_CATEGORIES = ['business', 'entertainment', 'general', 'health', 'science', 'sports', 'technology'];\r\n\r\nfunction HomePage() {\r\n  // Accept both categoryName and searchQuery from URL params\r\n  const { categoryName, searchQuery } = useParams();\r\n\r\n  const [newsArticles, setNewsArticles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [displayCategory, setDisplayCategory] = useState('Latest');\r\n\r\n  useEffect(() => {\r\n    let fetchCategory = null;\r\n    setError(null);\r\n\r\n    // If searchQuery exists, treat as search mode\r\n    if (searchQuery) {\r\n      setDisplayCategory(`Results for \"${decodeURIComponent(searchQuery)}\"`);\r\n    } else if (categoryName) {\r\n      const lowerCaseCategory = categoryName.toLowerCase();\r\n      if (VALID_CATEGORIES.includes(lowerCaseCategory)) {\r\n        fetchCategory = lowerCaseCategory;\r\n        setDisplayCategory(lowerCaseCategory.charAt(0).toUpperCase() + lowerCaseCategory.slice(1));\r\n      } else {\r\n        setError(`Invalid category: ${categoryName}. Please select a valid category.`);\r\n        setLoading(false);\r\n        setNewsArticles([]);\r\n        setDisplayCategory('Invalid Category');\r\n        return;\r\n      }\r\n    } else {\r\n      setDisplayCategory('Top Headlines');\r\n    }\r\n\r\n    const fetchNews = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      setNewsArticles([]);\r\n\r\n      const apiKey = process.env.REACT_APP_NEWS_API_KEY;\r\n\r\n      if (!apiKey) {\r\n        setError(\"News API key is missing.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      let apiUrl = `https://newsdata.io/api/1/latest?apikey=${apiKey}&country=in&language=en`;\r\n\r\n      // If searching, use the 'q' parameter for the topic\r\n      if (searchQuery) {\r\n        apiUrl += `&q=${encodeURIComponent(searchQuery)}`;\r\n      } else if (fetchCategory) {\r\n        apiUrl += `&category=${fetchCategory}`;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch(apiUrl);\r\n        if (!response.ok) {\r\n          let errorMsg = `HTTP error ${response.status}: Failed to fetch news.`;\r\n          try {\r\n            const errorData = await response.json();\r\n            errorMsg = `API Error (${response.status}): ${errorData.message || 'Check API documentation or key.'}`;\r\n          } catch (parseError) {}\r\n          throw new Error(errorMsg);\r\n        }\r\n        const data = await response.json();\r\n\r\n        // Adjusted for newsdata.io API structure\r\n        if ((data.status === \"success\" || data.status === \"ok\") && data.results) {\r\n          const validArticles = data.results.filter(\r\n            article => article.title && article.link && article.image_url\r\n          );\r\n          setNewsArticles(validArticles);\r\n          if (validArticles.length === 0) {\r\n            setError(searchQuery\r\n              ? `No articles found for \"${decodeURIComponent(searchQuery)}\".`\r\n              : (fetchCategory ? `No articles found for category: ${displayCategory}.` : \"No articles found.\")\r\n            );\r\n          }\r\n        } else if (data.status === \"error\") {\r\n          setError(`API Error: ${data.message || 'Unknown API error'}`);\r\n        } else {\r\n          setError(\"Received unexpected data structure from API.\");\r\n        }\r\n      } catch (err) {\r\n        setError(err.message.includes('Failed to fetch') ? \"Network error: Could not fetch news.\" : err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchNews();\r\n  }, [categoryName, searchQuery, displayCategory]);\r\n\r\n  const handleVerifyClick = (articleUrl) => {\r\n    if (!articleUrl) return;\r\n    alert(`Verification requested for: ${articleUrl}\\n(Backend call needed)`);\r\n    // TODO: Implement backend API call for verification\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <Hero /> */}\r\n\r\n      <div className=\"page-content\">\r\n        <h2 style={{ textAlign: 'center', margin: '1.5rem 0', color: '#333' }}>\r\n          {displayCategory}\r\n        </h2>\r\n\r\n        {loading && <LoadingSpinner />}\r\n\r\n        {error && !loading && (\r\n          <div className=\"error-message\">⚠️ Error: {error}</div>\r\n        )}\r\n\r\n        {!loading && !error && (\r\n          <div className=\"news-grid-container\">\r\n            {newsArticles.length > 0 ? (\r\n              newsArticles.map((article) => (\r\n                <NewsCard\r\n                  key={article.link}\r\n                  title={article.title}\r\n                  description={article.description}\r\n                  image={article.image_url}\r\n                  url={article.link}\r\n                  source={article.source_id}\r\n                  onVerifyClick={handleVerifyClick}\r\n                />\r\n              ))\r\n            ) : (\r\n              <p>No news articles available for this topic.</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}